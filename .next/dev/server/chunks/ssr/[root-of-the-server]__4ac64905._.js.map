{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 14, "column": 0}, "map": {"version":3,"sources":["file:///workspaces/sitek/lib/db.ts"],"sourcesContent":["// Unified database layer that works both on client and server\n// On client: uses localStorage\n// On server: uses data passed from client via API\n\nexport interface DatabaseData {\n  users: any[]\n  courses: any[]\n  progress: any[]\n  assignments: any[]\n  calls: any[]\n}\n\n// Client-side storage (localStorage)\nexport const clientDB = {\n  getUsers(): any[] {\n    if (typeof window === \"undefined\") return []\n    const data = localStorage.getItem(\"lms_users\")\n    return data ? JSON.parse(data) : []\n  },\n\n  setUsers(users: any[]) {\n    if (typeof window === \"undefined\") return\n    localStorage.setItem(\"lms_users\", JSON.stringify(users))\n  },\n\n  getCourses(): any[] {\n    if (typeof window === \"undefined\") return []\n    const data = localStorage.getItem(\"lms_courses\")\n    return data ? JSON.parse(data) : []\n  },\n\n  setCourses(courses: any[]) {\n    if (typeof window === \"undefined\") return\n    localStorage.setItem(\"lms_courses\", JSON.stringify(courses))\n  },\n\n  getProgress(): any[] {\n    if (typeof window === \"undefined\") return []\n    const data = localStorage.getItem(\"lms_progress\")\n    return data ? JSON.parse(data) : []\n  },\n\n  setProgress(progress: any[]) {\n    if (typeof window === \"undefined\") return\n    localStorage.setItem(\"lms_progress\", JSON.stringify(progress))\n  },\n\n  getAssignments(): any[] {\n    if (typeof window === \"undefined\") return []\n    const data = localStorage.getItem(\"lms_assignments\")\n    return data ? JSON.parse(data) : []\n  },\n\n  setAssignments(assignments: any[]) {\n    if (typeof window === \"undefined\") return\n    localStorage.setItem(\"lms_assignments\", JSON.stringify(assignments))\n  },\n\n  getCalls(): any[] {\n    if (typeof window === \"undefined\") return []\n    const data = localStorage.getItem(\"lms_calls\")\n    return data ? JSON.parse(data) : []\n  },\n\n  setCalls(calls: any[]) {\n    if (typeof window === \"undefined\") return\n    localStorage.setItem(\"lms_calls\", JSON.stringify(calls))\n  },\n\n  initializeDefaultAdmin() {\n    const users = this.getUsers()\n    if (users.length === 0) {\n      const defaultAdmin = {\n        id: \"admin-1\",\n        email: \"admin@system.com\",\n        name: \"Головний Адміністратор\",\n        role: \"admin\",\n        password: \"admin123\",\n        createdAt: new Date().toISOString(),\n      }\n      this.setUsers([defaultAdmin])\n    }\n  },\n}\nexport const serverDB = clientDB; // Додаємо alias для serverDB\n"],"names":[],"mappings":"AAAA,8DAA8D;AAC9D,+BAA+B;AAC/B,kDAAkD;;;;;;;AAW3C,MAAM,WAAW;IACtB;QACE,wCAAmC,OAAO,EAAE;;;QAC5C,MAAM;IAER;IAEA,UAAS,KAAY;QACnB,wCAAmC;;;IAErC;IAEA;QACE,wCAAmC,OAAO,EAAE;;;QAC5C,MAAM;IAER;IAEA,YAAW,OAAc;QACvB,wCAAmC;;;IAErC;IAEA;QACE,wCAAmC,OAAO,EAAE;;;QAC5C,MAAM;IAER;IAEA,aAAY,QAAe;QACzB,wCAAmC;;;IAErC;IAEA;QACE,wCAAmC,OAAO,EAAE;;;QAC5C,MAAM;IAER;IAEA,gBAAe,WAAkB;QAC/B,wCAAmC;;;IAErC;IAEA;QACE,wCAAmC,OAAO,EAAE;;;QAC5C,MAAM;IAER;IAEA,UAAS,KAAY;QACnB,wCAAmC;;;IAErC;IAEA;QACE,MAAM,QAAQ,IAAI,CAAC,QAAQ;QAC3B,IAAI,MAAM,MAAM,KAAK,GAAG;YACtB,MAAM,eAAe;gBACnB,IAAI;gBACJ,OAAO;gBACP,MAAM;gBACN,MAAM;gBACN,UAAU;gBACV,WAAW,IAAI,OAAO,WAAW;YACnC;YACA,IAAI,CAAC,QAAQ,CAAC;gBAAC;aAAa;QAC9B;IACF;AACF;AACO,MAAM,WAAW,UAAU,6BAA6B","debugId":null}},
    {"offset": {"line": 101, "column": 0}, "map": {"version":3,"sources":["file:///workspaces/sitek/lib/auth.ts"],"sourcesContent":["import { cookies } from \"next/headers\"\nimport type { User } from \"./types\"\nimport { serverDB } from \"@/lib/db\"\n\n// Simple JWT-like token generation\nfunction generateToken(user: User): string {\n  const payload = {\n    id: user.id,\n    email: user.email,\n    role: user.role,\n    exp: Date.now() + 24 * 60 * 60 * 1000, // 24 hours\n  }\n  return Buffer.from(JSON.stringify(payload)).toString(\"base64\")\n}\n\nfunction verifyToken(token: string): User | null {\n  try {\n    const payload = JSON.parse(Buffer.from(token, \"base64\").toString())\n    if (payload.exp < Date.now()) return null\n    return {\n      id: payload.id,\n      email: payload.email,\n      name: payload.name || \"\",\n      role: payload.role,\n      createdAt: payload.createdAt || new Date().toISOString(),\n    }\n  } catch {\n    return null\n  }\n}\n\nexport async function getCurrentUser(): Promise<User | null> {\n  const cookieStore = await cookies()\n  const token = cookieStore.get(\"auth_token\")?.value\n  if (!token) return null\n  return verifyToken(token)\n}\n\nexport async function requireAuth(): Promise<User> {\n  const user = await getCurrentUser()\n  if (!user) throw new Error(\"Unauthorized\")\n  return user\n}\n\nexport async function requireAdmin(): Promise<User> {\n  const user = await requireAuth()\n  // Allow both admin and superadmin to be treated as admin for most operations\n  if (user.role !== \"admin\" && user.role !== \"superadmin\") throw new Error(\"Forbidden\")\n  return user\n}\n\nexport async function requireSuperAdmin(): Promise<User> {\n  const user = await requireAuth()\n  if (user.role !== \"superadmin\") throw new Error(\"Forbidden\")\n  return user\n}\n\nexport async function validateLogin(\n  email: string,\n  password: string,\n  users: any[],\n): Promise<{ user: User; token: string } | null> {\n  const user = users.find((u: any) => u.email === email && u.password === password)\n\n  if (!user) return null\n\n  const userData: User = {\n    id: user.id,\n    email: user.email,\n    name: user.name,\n    role: user.role,\n    createdAt: user.createdAt,\n    createdBy: user.createdBy,\n  }\n\n  const token = generateToken(userData)\n  return { user: userData, token }\n}\n\n// Synchronous helpers for server-side pages that need user lists\nexport function getAllUsers(): User[] {\n  const users = serverDB.getUsers()\n  return users.map((u: any) => ({\n    id: u.id,\n    email: u.email,\n    name: u.name,\n    role: u.role,\n    createdAt: u.createdAt,\n    managerId: u.managerId,\n  }))\n}\n\nexport function getAllUsersExceptMainAdmin(): User[] {\n  const MAIN_ADMIN_ID = \"admin-1\"\n  const users = serverDB.getUsers()\n  return users\n    .filter((u: any) => u.id !== MAIN_ADMIN_ID)\n    .map((u: any) => ({ id: u.id, email: u.email, name: u.name, role: u.role, createdAt: u.createdAt }))\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;AAAA;AAEA;;;AAEA,mCAAmC;AACnC,SAAS,cAAc,IAAU;IAC/B,MAAM,UAAU;QACd,IAAI,KAAK,EAAE;QACX,OAAO,KAAK,KAAK;QACjB,MAAM,KAAK,IAAI;QACf,KAAK,KAAK,GAAG,KAAK,KAAK,KAAK,KAAK;IACnC;IACA,OAAO,OAAO,IAAI,CAAC,KAAK,SAAS,CAAC,UAAU,QAAQ,CAAC;AACvD;AAEA,SAAS,YAAY,KAAa;IAChC,IAAI;QACF,MAAM,UAAU,KAAK,KAAK,CAAC,OAAO,IAAI,CAAC,OAAO,UAAU,QAAQ;QAChE,IAAI,QAAQ,GAAG,GAAG,KAAK,GAAG,IAAI,OAAO;QACrC,OAAO;YACL,IAAI,QAAQ,EAAE;YACd,OAAO,QAAQ,KAAK;YACpB,MAAM,QAAQ,IAAI,IAAI;YACtB,MAAM,QAAQ,IAAI;YAClB,WAAW,QAAQ,SAAS,IAAI,IAAI,OAAO,WAAW;QACxD;IACF,EAAE,OAAM;QACN,OAAO;IACT;AACF;AAEO,eAAe;IACpB,MAAM,cAAc,MAAM,IAAA,yQAAO;IACjC,MAAM,QAAQ,YAAY,GAAG,CAAC,eAAe;IAC7C,IAAI,CAAC,OAAO,OAAO;IACnB,OAAO,YAAY;AACrB;AAEO,eAAe;IACpB,MAAM,OAAO,MAAM;IACnB,IAAI,CAAC,MAAM,MAAM,IAAI,MAAM;IAC3B,OAAO;AACT;AAEO,eAAe;IACpB,MAAM,OAAO,MAAM;IACnB,6EAA6E;IAC7E,IAAI,KAAK,IAAI,KAAK,WAAW,KAAK,IAAI,KAAK,cAAc,MAAM,IAAI,MAAM;IACzE,OAAO;AACT;AAEO,eAAe;IACpB,MAAM,OAAO,MAAM;IACnB,IAAI,KAAK,IAAI,KAAK,cAAc,MAAM,IAAI,MAAM;IAChD,OAAO;AACT;AAEO,eAAe,cACpB,KAAa,EACb,QAAgB,EAChB,KAAY;IAEZ,MAAM,OAAO,MAAM,IAAI,CAAC,CAAC,IAAW,EAAE,KAAK,KAAK,SAAS,EAAE,QAAQ,KAAK;IAExE,IAAI,CAAC,MAAM,OAAO;IAElB,MAAM,WAAiB;QACrB,IAAI,KAAK,EAAE;QACX,OAAO,KAAK,KAAK;QACjB,MAAM,KAAK,IAAI;QACf,MAAM,KAAK,IAAI;QACf,WAAW,KAAK,SAAS;QACzB,WAAW,KAAK,SAAS;IAC3B;IAEA,MAAM,QAAQ,cAAc;IAC5B,OAAO;QAAE,MAAM;QAAU;IAAM;AACjC;AAGO,SAAS;IACd,MAAM,QAAQ,qHAAQ,CAAC,QAAQ;IAC/B,OAAO,MAAM,GAAG,CAAC,CAAC,IAAW,CAAC;YAC5B,IAAI,EAAE,EAAE;YACR,OAAO,EAAE,KAAK;YACd,MAAM,EAAE,IAAI;YACZ,MAAM,EAAE,IAAI;YACZ,WAAW,EAAE,SAAS;YACtB,WAAW,EAAE,SAAS;QACxB,CAAC;AACH;AAEO,SAAS;IACd,MAAM,gBAAgB;IACtB,MAAM,QAAQ,qHAAQ,CAAC,QAAQ;IAC/B,OAAO,MACJ,MAAM,CAAC,CAAC,IAAW,EAAE,EAAE,KAAK,eAC5B,GAAG,CAAC,CAAC,IAAW,CAAC;YAAE,IAAI,EAAE,EAAE;YAAE,OAAO,EAAE,KAAK;YAAE,MAAM,EAAE,IAAI;YAAE,MAAM,EAAE,IAAI;YAAE,WAAW,EAAE,SAAS;QAAC,CAAC;AACtG","debugId":null}},
    {"offset": {"line": 211, "column": 0}, "map": {"version":3,"sources":["file:///workspaces/sitek/components/login-form.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const LoginForm = registerClientReference(\n    function() { throw new Error(\"Attempted to call LoginForm() from the server but LoginForm is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/login-form.tsx <module evaluation>\",\n    \"LoginForm\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;AACO,MAAM,YAAY,IAAA,uYAAuB,EAC5C;IAAa,MAAM,IAAI,MAAM;AAAkO,GAC/P,2DACA","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 225, "column": 0}, "map": {"version":3,"sources":["file:///workspaces/sitek/components/login-form.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const LoginForm = registerClientReference(\n    function() { throw new Error(\"Attempted to call LoginForm() from the server but LoginForm is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/login-form.tsx\",\n    \"LoginForm\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;AACO,MAAM,YAAY,IAAA,uYAAuB,EAC5C;IAAa,MAAM,IAAI,MAAM;AAAkO,GAC/P,uCACA","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 239, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 247, "column": 0}, "map": {"version":3,"sources":["file:///workspaces/sitek/components/theme-toggle.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const ThemeToggle = registerClientReference(\n    function() { throw new Error(\"Attempted to call ThemeToggle() from the server but ThemeToggle is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/theme-toggle.tsx <module evaluation>\",\n    \"ThemeToggle\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;AACO,MAAM,cAAc,IAAA,uYAAuB,EAC9C;IAAa,MAAM,IAAI,MAAM;AAAsO,GACnQ,6DACA","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 261, "column": 0}, "map": {"version":3,"sources":["file:///workspaces/sitek/components/theme-toggle.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const ThemeToggle = registerClientReference(\n    function() { throw new Error(\"Attempted to call ThemeToggle() from the server but ThemeToggle is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/theme-toggle.tsx\",\n    \"ThemeToggle\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;AACO,MAAM,cAAc,IAAA,uYAAuB,EAC9C;IAAa,MAAM,IAAI,MAAM;AAAsO,GACnQ,yCACA","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 275, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 283, "column": 0}, "map": {"version":3,"sources":["file:///workspaces/sitek/app/page.tsx"],"sourcesContent":["import { redirect } from \"next/navigation\"\nimport { getCurrentUser } from \"@/lib/auth\"\nimport { LoginForm } from \"@/components/login-form\"\nimport { ThemeProvider } from \"@/components/theme-provider\"\nimport { ThemeToggle } from \"@/components/theme-toggle\"\n\nexport default async function HomePage() {\n  const user = await getCurrentUser()\n\n  if (user) {\n    if (user.role === \"admin\") {\n      redirect(\"/admin\")\n    } else {\n      redirect(\"/dashboard\")\n    }\n  }\n\n  return (\n    <ThemeProvider>\n      <div className=\"min-h-screen flex items-center justify-center bg-gradient-to-br from-primary/5 via-background to-accent/5 p-4\">\n        <div className=\"absolute top-4 right-4\">\n          <ThemeToggle />\n        </div>\n        <div className=\"w-full max-w-md\">\n          <div className=\"text-center mb-8\">\n            <h1 className=\"text-4xl font-bold mb-2 text-balance\">LMSAlphadate</h1>\n            <p className=\"text-muted-foreground\">Інтерактивні курси для вашої команди</p>\n          </div>\n          <LoginForm />\n        </div>\n      </div>\n    </ThemeProvider>\n  )\n}\n"],"names":[],"mappings":";;;;;AAAA;AAAA;AACA;AACA;AACA;AACA;;;;;;;AAEe,eAAe;IAC5B,MAAM,OAAO,MAAM,IAAA,6HAAc;IAEjC,IAAI,MAAM;QACR,IAAI,KAAK,IAAI,KAAK,SAAS;YACzB,IAAA,gUAAQ,EAAC;QACX,OAAO;YACL,IAAA,gUAAQ,EAAC;QACX;IACF;IAEA,qBACE,6WAAC,iJAAa;kBACZ,cAAA,6WAAC;YAAI,WAAU;;8BACb,6WAAC;oBAAI,WAAU;8BACb,cAAA,6WAAC,6IAAW;;;;;;;;;;8BAEd,6WAAC;oBAAI,WAAU;;sCACb,6WAAC;4BAAI,WAAU;;8CACb,6WAAC;oCAAG,WAAU;8CAAuC;;;;;;8CACrD,6WAAC;oCAAE,WAAU;8CAAwB;;;;;;;;;;;;sCAEvC,6WAAC,yIAAS;;;;;;;;;;;;;;;;;;;;;;AAKpB","debugId":null}}]
}